# 可升级合约

Solidity 开发的目标之一是创建可持续、安全且能够随技术进步而更新的智能合约。然而，区块链的一个基本特性是数据不可变性：一旦智能合约被部署，它的代码不能被更改。这带来了显著的挑战，尤其是当发现bug或需要添加新功能时。因此，“可升级合约”应运而生，它允许开发者在不需要改动已部署合约的情况下更新其逻辑。

## 为什么需要可升级合约

1. 错误和安全漏洞: 固定不变的智能合约代码如果一旦包含错误就很难解决。
2. 提供改进和新增特性: 随着项目的发展，可能需要增加新的功能或改进现有功能。

## 如何实现可升级合约

实现可升级智能合约主要有两种模式：代理模式和diamond模式。

1. 代理模式

代理模式是实现智能合约可升级性的最常见方法。其核心思想是将合约分为两部分：代理合约和逻辑合约。

• 代理合约负责存储状态变量和将调用委托给逻辑合约。
• 逻辑合约包含实际的业务逻辑。

当需要升级合约时，只需部署新的逻辑合约，并更新代理合约中指向逻辑合约的地址。

详情见[代理合约](./proxy.md)


2. Diamond 模式 (EIP-2535)

Diamond模式，或EIP-2535，是另一种更先进的升级策略。它允许一个智能合约拥有多个逻辑合约（称为Facets），每个Facets实现合约的一部分功能。这种方法在处理大型合约时特别有效，因为它允许开发者以模块化的方式维护和升级代码。


## 



结尾

通过上述介绍和示例，我们看到可升级合约在实际应用中是非常重要的，它使得智能合约能够适应未来的需求和可能的变化。在 Solidity 中实现这些模式需要深入的理解和精确的代码管理，但这对于创建可持续和灵活的智能合约项目是必要的。